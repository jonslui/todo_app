(()=>{"use strict";const t=function(t,e,n){return((t,e,n)=>{let i={title:t,description:e,due_date:n,status:!1,children:[]};return Object.assign({state:i})})(t,e,n)};let e=(null==localStorage.getItem("task_array")&&localStorage.setItem("task_array",JSON.stringify([])),JSON.parse(localStorage.getItem("task_array")));function n(t,l,a,d,r,s){let c=document.createElement("div");c.setAttribute("class","task_title"),c.innerHTML=t.state.title;let u=document.createElement("div");u.setAttribute("class","remove_child"),u.innerHTML="X",u.addEventListener("click",(function(){!function(t,n){let i=n.indexOf(t);n.splice(i,1),console.log(i),console.log(n),localStorage.setItem("task_array",JSON.stringify(e))}(t,l),c.remove(),u.remove()})),c.addEventListener("click",(function(){!function(t,l,a,d){a.style.display="none",d.style.display="",l.innerHTML="";let r=document.createElement("div");r.innerHTML="Title: "+t.state.title,l.appendChild(r);let s=document.createElement("div");s.innerHTML="Description: "+t.state.description,l.appendChild(s);let c=document.createElement("div");c.innerHTML="Due date: "+t.state.due_date,l.appendChild(c);let u=document.createElement("div");u.setAttribute("id","subtask_link_container"),l.appendChild(u);let o=document.createElement("button");o.innerHTML="New Subtask",o.setAttribute("id","create_new_subtask_button"),l.appendChild(o);let p=document.getElementById("subtask_form_container"),m=document.getElementById("subtask_info_container");o.addEventListener("click",(function(){i(p,m,o,e.indexOf(t))})),t.state.children.forEach((e=>n(e,t.state.children,u,m,p,o)))}(t,d,r,s)})),a.appendChild(c),a.appendChild(u)}function i(e,n,i,l){n.innerHTML="",0==e.hasChildNodes()?(function(t,e,n,i){let l=document.createElement("form"),a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("class","title_input"),a.placeholder="Title",a.required=!0;let d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("class","description_input"),d.placeholder="Description",d.required=!0;let r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("class","due_date_input"),r.placeholder="Due date",l.appendChild(a),l.appendChild(d),l.appendChild(r);let s=document.createElement("button");s.setAttribute("type","button"),s.setAttribute("class","form_button"),s.innerHTML="Cancel",s.addEventListener("click",(function(){!function(t,e){t.style.display="none",e.style.display=""}(t,e)}));let c=document.createElement("button");c.setAttribute("type","submit"),c.setAttribute("class","form_button"),c.innerHTML="Submit",l.appendChild(c),l.appendChild(s);let u=[a,d,r];l.onsubmit=function(){!function(t,e,n=null){let i=JSON.parse(localStorage.getItem("task_array")),l=e(t[0].value,t[1].value,t[2].value);null==n?i.push(l):i[n].state.children.push(l),localStorage.setItem("task_array",JSON.stringify(i))}(u,n,i)},t.appendChild(l)}(e,i,t,l),e.style.display=""):e.style.display="",i.style.display="none"}!function(){let t=document.getElementById("content"),l=document.createElement("div");l.setAttribute("id","titles_container"),t.appendChild(l);let a=document.createElement("button");a.innerHTML="New Task",a.setAttribute("id","create_new_task_button"),l.appendChild(a);let d=document.createElement("div");d.setAttribute("id","task_titles_container"),l.appendChild(d);let r=document.createElement("div");r.setAttribute("id","task_display_container"),t.appendChild(r);let s=document.createElement("div");s.setAttribute("id","form_container"),r.appendChild(s);let c=document.createElement("div");c.setAttribute("id","task_info_container"),r.appendChild(c),e.forEach((t=>n(t,e,d,c,s,a))),a.addEventListener("click",(function(){i(s,c,a)}));let u=document.createElement("div");u.setAttribute("id","subtask_display_container"),t.appendChild(u);let o=document.createElement("div");o.setAttribute("id","subtask_form_container"),u.appendChild(o);let p=document.createElement("div");p.setAttribute("id","subtask_info_container"),u.appendChild(p)}()})();